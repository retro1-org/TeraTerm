<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
  "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<title>Keyboard setup file</title>
<meta http-equiv="Content-Style-Type" content="text/css">
<link rel="stylesheet" href="../style.css" type="text/css">
</head>
<body>

<h1>Keyboard setup file</h1>

<p>
The keyboard setup file assigns keys on PC keyboard for various functions such as VT terminal functions, sending user defined character strings, Tera Term commands and executing macro files.
</p>

<p>
The default keyboard setup stored in the file KEYBOARD.CNF is almost compatible with VT terminal keyboard.
You can modify key assignments by editing the file.
See <A HREF="../reference/keycode.txt">KEYCODE.TXT</A> for the format of keyboard setup file.
</p>

<p>
The file name of keyboard setup file to be loaded by Tera Term can be specified as a <A HREF="../commandline/teraterm.html">command line</A> parameter of Tera Term.
If you omit the file name extension, the default extension ".CNF" is assumed. If you omit the file name, the default file  <strong>KEYBOARD.CNF</strong> is loaded.
</p>

<p>
The distribution package contains the following keyboard setup files:
</p>

<dl>
  <dt>IBMKEYB.CNF</dt>
  <dd>Sample file for the IBM-PC/AT 101-key keyboard</dd>

  <dt>PC98KEYB.CNF</dt>
  <dd>Sample file for the NEC PC 98 keyboard (Japanese Windows 95)</dd>

  <dt>NT98KEYB.CNF</dt>
  <dd>Sample file for the NEC PC 98 keyboard (Japanese Windows NT)</dd>

  <dt>FUNCTION.CNF</dt>
  <dd>A customize sample based on IBMKEYB.CNF<br>
      <ul>
        <li>F1-F10 are modified</li>
        <li>Editor keypad(*1) and Special keys(*2) are used to send a character sequence which displays a symbol on the key top of each VT200 terminal keyboard(*3).</li>
      </ul></dd>

  <dt>EDITOR.CNF</dt>
  <dd>A customize sample based on IBMKEYB.CNF<br>
      <ul>
        <li>Editor keypad(*1) are used to send a character sequence which displays a symbol on the key top of each VT200 terminal keyboard(*3).</li>
      </ul></dd>

  <dt>KEYBOARD.CNF</dt>
  <dd>Default keyboard setup file (copy of EDITOR.CNF at the moment just after the installation)</dd>
</dl>

<p>
(*1) Editor keypad mentioned here are Ins, Del, Home, End, PageUp and PageDown.<br>
(*2) Special keys mentioned here are *, /, +, -, Ctrl+"+" on a Ten-Key pad.<br>
(*3) The location of these keys on VT220 is different from a generic 101(106) keyboard. With a keyboard setup file other than FUNCTION.CNF  and EDITOR.CNF, a character sequence to be sent is same as one of 101(106) keyboard. This is derived from the specification of original Tera Term Pro.<br>
On the other hand, FUNCTION.CNF and EDITOR.CNF defines a character sequence which displays a symbol of each key top "as-is". By using this, special keys will behave as each symbol of key top when an application which utilizes special keys is run.
</p>

<p>
The installer will copy <strong>EDITOR.CNF</strong> on <strong>KEYBOARD.CNF</strong>.
If you want to use a different key map, copy an appropriate file on <strong>KEYBOARD.CNF</strong> to meet your need.
</p>

<p>
If you want to use PC98 NX key map, use <strong>IBMKEYB.CNF</strong>.
</p>

<p>
キーコードは keycode.exe で調べることができます。<A HREF="../reference/keycode.txt">keycode.txt</A>を参照ください。


<h1>ABOUT THE KEYBOARD SETUP FILE</h1>

<h2 id="keyboard_cfg">FORMAT OF THE KEYBOARD SETUP FILE</h2>

<p>
Each key or key combination has a unique key code, which is called
"PC key code".
</p>

<p>
The keyboard setup file has six sections.
</p>

<ul>
<li>[VT editor keypad]
<li>[VT numeric keypad]
<li>[VT function keys]
<li>[X function keys]
<li>[Shortcut keys]
<li>[User keys]
</ul>

<h3>[VT editor keypad] section</h3>

<p>
In this section, VT editor keys are assigned to PC keys.
</p>

<pre>
	Format:
		&lt;VT editor key name&gt;=&lt;PC key code&gt;

	where:

	&lt;VT editor key name&gt;
		Up, Down, Right, Left, Find, Insert, Remove, Select,
		Prev, Next

	  &lt;PC key code&gt;
		PC key code (decimal number)

	Example:
		Up=328
</pre>

<h3>[VT numeric keypad] section</h3>

<p>
In this section, VT numeric keys are assigned to PC keys.
</p>

<pre>
	Format:
		&lt;VT numeric key name&gt;=&lt;PC key code&gt;

	where:

	  &lt;VT numeric key name&gt;
		Num0, Num1, Num2, Num3, Num4, Num5, Num6, Num7, Num8,
		Num9, NumMinus, NumComma, NumPeriod, NumEnter, PF1,
		PF2, PF3, PF4

	  &lt;PC key code&gt;
		PC key code (decimal number)

	Example:
		Num0=82
</pre>

<h4>注意</h4>

<p>
VT 端末ではメインキーパッドの "Enter" キーと数値キーパッドの
"Enter" キーが違う文字列を送出するモードがあるので、"NumEnter=" の
後にはメインキーの "Enter" の PC key code を書かないでください。
メインキーパッドの "Enter" と数値キーパッドの "Enter" が同じ
PC key code を発生するキーボード(例えば PC9801 キーボード)の場合は
注意が必要です。
</p>

<h3>[VT function keys] section</h3>

<p>
In this section, VT function keys are assigned to PC keys.
</p>

<pre>
	Format:
		&lt;VT function key name&gt;=&lt;PC key code&gt;

	where:

	  &lt;VT function key name&gt;
		(Function keys of VT terminal)
		Hold, Print, Break, F6, F7, F8, F9, F10, F11, F12,
		F13, F14, Help, Do, F17, F18, F19, F20
		("User defined keys" of VT terminal)
		UDK6, UDK7, UDK8, UDK9, UDK10, UDK11, UDK12, UDK13,
		UDK14, UDK15, UDK16, UDK17, UDK18, UDK19, UDK20

	  &lt;PC key code&gt;
		PC key code (decimal number)

	Example:
		F6=64
</pre>

<h3>[X function keys] section</h3>

<p>
In this section, Xterm F1-F5 keys and BackTab key are assigned to PC keys.
</p>

<pre>
	Format:
		&lt;Xterm function key name&gt;=&lt;PC key code&gt;

	where:

	  &lt;Xterm function key name&gt;
		XF1, XF2, XF3, XF4, XF5, XBackTab

	  &lt;PC key code&gt;
		PC key code (decimal number)

	Example:
		XF1=59
</pre>

<h3>[Shortcut keys] section</h3>

<p>
In this section, Tera Term functions are assigned to PC keys.
</p>

<pre>
	Format:
		&lt;Shortcut key name&gt;=&lt;PC key code&gt;

	where:
	  &lt;Shortcut key name&gt;	Function
	  --------------------------------------------
	  EditCopy		[Edit] Copy command
	  EditPaste		[Edit] Paste command
	  EditPasteCR		[Edit] Paste&lt;CR&gt; command
	  EditCLS		[Edit] Clear screen command
	  EditCLB		[Edit] Clear buffer command
	  ControlOpenTEK	[Control] Open TEK command
	  ControlCloseTEK	[Control] Close TEK command
	  LineUp		Scrolls up screen by 1 line
	  LineDown		Scrolls down by 1 line
	  PageUp		Scrolls up by 1 page
	  PageDown		Scrolls down by 1 page
	  BuffTop		Scrolls screen to buffer top
	  BuffBottom		Scrolls screen to buffer bottom
	  NextWin		Moves to the next Tera Term window
	  PrevWin		Moves to the previous Tera Term window
	  NextShownWin		Moves to the next Tera Term window (except minimized)
	  PrevShownWin		Moves to the previous Tera Term window (except minimized)
	  LocalEcho		Toggles the local echo status

	  &lt;PC key code&gt;
		PC key code (decimal number)

	Example:
		LineUp=1352
</pre>

<h3>[User keys] section</h3>

<p>
This section defines user keys for functions, sending a character
string, executing a macro file or executing a menu command.
</p>

<pre>
	Format:
		&lt;User key name&gt;=&lt;PC key code&gt;,&lt;Control flag&gt;,
				&lt;Character string&gt;

	where:

	  &lt;User key name&gt;
		User1, User2, User3,...., User99
		Maximum number of user keys is 99. 
		For example, if you want to define ten user keys,
		you must use the first ten names, from "User1" to "User10".

	  &lt;PC key code&gt;
		PC key code (decimal number)

	  &lt;Control flag&gt;
		Control flag which specifies how &lt;character string&gt;
		is treated when the PC key is pressed.
			0	&lt;Character string&gt; is sent as it is.
			1	New-line codes in &lt;Character string&gt;
				are converted by Tera Term and
				the converted string is sent.
			2	A macro file which has the name of
				&lt;Character string&gt; is executed.
			3	A Tera Term menu command specified
				by the menu ID &lt;Character string&gt; is
				executed.

	  &lt;Character string&gt;
		If &lt;Control flag&gt; is 0 or 1, &lt;Character string&gt;
		represents the character string to be sent.
		A non-printable character (control character) in
		the string can be expressed as a "$" and ASCII code
		in two-character hex number. For example, CR character
		is expressed as "$0D". "$" itself is expressed as "$24".
		See "Appendix A  ASCII CODE TABLE".

		If &lt;Control flag&gt; is 2, &lt;Character string&gt; specifies
		the macro file name to be executed.

		If &lt;Control flag&gt; is 3, &lt;Character string&gt; is the menu
		ID which specifies the menu command to be executed.
		The menu ID should be expressed as a decimal number.
		See "Appendix B  LIST OF MENU IDs".

	Example:
		User1=1083,0,telnet myhost
		User2=1084,0,$0D$0A
		User3=1085,1,$0D
		User4=1086,2,test.ttl
		User5=1087,3,50110
</pre>

<h2 id="note">NOTE</h2>

<p>
You can use a PC key code only once in the setup file.
If you use a PC key code for multiple key assignments,
the warning message "Key code XXX is used more than once" is
displayed when the file is loaded by Tera Term. In this case,
one of the assignments becomes effective and others are ignored.
</p>

<p>
If you don't want to assign a key item to any PC key,
use the word "off" like the following:
</p>

<pre>
    EditCopy=off
</pre>

<h2>KEY COMBINATIONS</h2>

<p>
The following key combinations are acceptable to Tera Term and KEYCODE.EXE:
</p>

<pre>
	Shift+key
	Ctrl+key
	Shift+Ctrl+key
	Shift+Alt+key
	Ctrl+Alt+key
	Shift+Ctrl+Alt+key
</pre>

<p>
Since some combinations (such as Alt+key) are used as shortcut keys of
Tera Term and Windows, they don't have PC key codes and can't be specified
in the keyboard setup file.
</p>

<p>
[NOTE]
You can specify `Alt+key' combination when Alt key uses meta key. Check
`Meta key' under Keyboard of Setup menu. The key code can be obtained by
KEYCODE.EXE, unfortunately the key code of `Alt+key' combination can not
be obtained. Also, you obtain the key code and add 2048 on the value.
</p>

<p>
For example, the `V' key code is 47, also `Alt+V' key code is 2095.
</p>

<pre>
; Shift + Insert
EditPaste=850
</pre>

<p>
If you change above entry to `EditPaste=2095', you can paste by using
`Alt+V' on condition that Meta key is pass through.
</p>

<p>
You add in the following entry to [User keys] section in KEYBOARD.CNF if
you wan to paster by using `Alt+V' remaining `Shift+Insert' function.
</p>

<pre>
User1=2095,3,50230
</pre>

<h1>Q & A</h1>

<p>
<span class="qanda">Q.</span> Every time I run Tera Term, the warning message
   "Key code XXX is used more than once" is displayed.<br>
<span class="qanda">A.</span> See <a href="#note">NOTE</a>.
</p>

<p>
<span class="qanda">Q.</span> I want to use the PC "F1" key as the VT100 PF1 key. I edit the 
   keyboard setup file like the following but it does not work:<br>

<pre>
	[VT function keys]
	F1=PF1		(This is wrong.)
</pre>

<span class="qanda">A.</span> The left hand side can not be the name of a **PC key** but
   the name of a **VT terminal key**. The right hand side can not be
   the name of a key but a PC key code.
   See "3.1 FORMAT OF THE KEYBOARD SETUP FILE".
   You should also be careful not to specify a PC key code more than
   once in the setup file (see "3.2 NOTE").<br>

   Edit the keyboard setup file like the following:<br>

<pre>
	[VT function keys]
	PF1=59			(59 is the keycode for the F1 key.)
	[X function keys]
	;XF1=59			(Avoid specifying 59 twice.)
	XF1=off			(Replace 59 by "off".)
</pre>
</p>

<p>
<span class="qanda">Q.</span> How to edit the keyboard setup file to assign the F1 key
   for sending the escape sequence "ESC [ A"?<br>
<span class="qanda">A.</span> You can send any character string by using a user key.
   See <a href="#keyboard_cfg">FORMAT OF THE KEYBOARD SETUP FILE</a>.
   You should also be careful not to specify a PC keycode more than
   once in the setup file (see <a href="#note">NOTE</a>).<br>

   Edit the keyboard setup file like the following:
<pre>
	[X function keys]
	;XF1=59			(59 is the keycode for the F1 key.)
					(Avoid specifying 59 twice.)
	XF1=off			(Replace 59 by "off".)
	[User keys]
	User1=59,0,$1B[A		(The ASCII code for ESC is $1B.)
</pre>
</p>

</body>
</html>
